<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CAD</title>

  <style>
    /* ServiceNow-style exam theme (no radio ::before) */
    :root{
      --sn-blue:#1f5bd8;
      --sn-blue-dark:#1543a8;
      --sn-bg:#f5f7fa;
      --sn-card:#ffffff;
      --sn-border:#d1d5db;
      --sn-text:#1f2937;
      --sn-muted:#6b7280;
      --sn-correct:#dff5e4;
    }

    body{
      font-family: "Segoe UI", Roboto, Arial, sans-serif;
      background: var(--sn-bg);
      color: var(--sn-text);
      margin:0;
      padding:30px;
    }

    .wrap{ max-width: 980px; margin: 0 auto; }

    /* Header bar */
    .header{
      background: var(--sn-blue);
      color:white;
      padding:14px 20px;
      border-radius:8px;
      margin-bottom:14px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
    }
    .header h1{
      margin:0;
      font-size:20px;
      font-weight:700;
      letter-spacing:.3px;
    }
    .header .sub{
      font-size:12px;
      opacity:.95;
      text-align:right;
      white-space:nowrap;
    }

    .muted{ color: var(--sn-muted); font-size: 13px; }

    /* Category + Search bar */
    .filters{
      background: var(--sn-card);
      border:1px solid var(--sn-border);
      padding:12px;
      border-radius:8px;
      margin-bottom:16px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }
    .filters .label{ font-size:13px; color: var(--sn-muted); margin-right:2px; }

    .search{
      margin-left:auto;
      display:flex;
      gap:8px;
      align-items:center;
      flex-wrap:wrap;
    }
    input[type="search"]{
      border:1px solid var(--sn-border);
      border-radius:6px;
      padding:8px 10px;
      min-width: 240px;
      outline:none;
      background:#fff;
    }
    input[type="search"]:focus{
      border-color: var(--sn-blue);
      box-shadow: 0 0 0 3px rgba(31,91,216,.12);
    }

    /* Buttons */
    button{
      background:#ffffff;
      border:1px solid var(--sn-border);
      color:var(--sn-text);
      padding:8px 14px;
      border-radius:6px;
      font-weight:600;
      cursor:pointer;
      transition:.15s;
    }
    button:hover{
      background:#eef2ff;
      border-color:var(--sn-blue);
    }
    button.active{
      background:var(--sn-blue);
      color:white;
      border-color:var(--sn-blue-dark);
    }
    button.small{
      padding:6px 10px;
      font-size:12px;
    }

    /* Question card */
    .card{
      background:var(--sn-card);
      border:1px solid var(--sn-border);
      border-radius:8px;
      padding:18px;
      margin-bottom:16px;
      box-shadow:0 1px 2px rgba(0,0,0,.08);
    }
    .qhead{
      display:flex;
      gap:12px;
      align-items:flex-start;
      justify-content:space-between;
    }
    .qtitle{
      font-size:17px;
      font-weight:600;
      margin:0;
      line-height:1.35;
      flex: 1;
    }

    .pill{
      background:#eef2ff;
      border:1px solid #c7d2fe;
      color:#1e3a8a;
      font-size:12px;
      border-radius:6px;
      padding:4px 8px;
      white-space:nowrap;
    }

    /* Answers (no ::before radio) */
    .answers{ margin-top:14px; display:grid; gap:10px; }
    .ans{
      display:flex;
      gap:12px;
      align-items:flex-start;
      border:1px solid var(--sn-border);
      border-radius:6px;
      padding:12px;
      background:white;
      transition:.15s;
    }
    .ans:hover{
      border-color:var(--sn-blue);
      background:#f0f6ff;
    }
    .ans code{ font-weight:800; }

    /* Correct highlight */
    .ans.correct{
      background:var(--sn-correct);
      border-color:#22a559;
    }

    .btnrow{
      margin-top:14px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }

    .empty{
      background: #fff;
      border: 1px dashed var(--sn-border);
      border-radius: 8px;
      padding: 18px;
    }
  </style>
</head>

<body>
  <div class="wrap">

    <div class="header">
      <h1>CAD</h1>
      <div class="sub">
        ServiceNow Exam Practice<br/>
        <span id="counts">0 questions</span>
      </div>
    </div>

    <div class="filters">
      <span class="label">Category:</span>
      <div id="categoryButtons"></div>

      <button id="shuffleBtn" type="button">ðŸ”€ Shuffle Questions</button>

      <div class="search">
        <span class="label">Search:</span>
        <input id="searchBox" type="search" placeholder="Type to filter questions..." />
        <button id="clearSearchBtn" class="small" type="button">Clear</button>
      </div>
    </div>

    <div id="questionsRoot" aria-live="polite"></div>

  </div>
  <!-- Questions bank -->
  <!--<script src="https://cdn.jsdelivr.net/gh/mayorian/qeustion-bank-exam1@latest/bank.js"></script>-->
  <script>
    // =========================
    // 1) QUESTION BANK (EDIT ME)
    // =========================
    var questionsBankArray = [
  {
    "category": "Scripting Overview",
    "question": "Where do Client Scripts execute in ServiceNow?",
    "answers": {
      "a": "Database server",
      "b": "Browser",
      "c": "MID Server",
      "d": "Flow Engine only"
    },
    "rightAnswers": "b"
  },
  {
    "category": "Scripting Overview",
    "question": "Which actions are typical client-side behaviors? (Select all that apply)",
    "answers": {
      "a": "Auto-populate a field based on another field",
      "b": "Show or hide form sections",
      "c": "Directly update database records",
      "d": "Run scheduled jobs"
    },
    "rightAnswers": "a,b"
  },
  {
    "category": "Scripting Overview",
    "question": "Server-side scripts are primarily used to:",
    "answers": {
      "a": "Change CSS themes",
      "b": "Modify database records",
      "c": "Play notification sounds",
      "d": "Adjust browser zoom"
    },
    "rightAnswers": "b"
  },
  {
    "category": "Scripting Overview",
    "question": "What can a server-side script trigger in ServiceNow?",
    "answers": {
      "a": "Flow Designer process",
      "b": "Browser refresh animation",
      "c": "User keyboard input",
      "d": "Local file download"
    },
    "rightAnswers": "a"
  },
  {
    "category": "Scripting Overview",
    "question": "Scripts that integrate with third-party applications run on:",
    "answers": {
      "a": "Client browser",
      "b": "MID Server",
      "c": "Mobile device",
      "d": "Theme editor"
    },
    "rightAnswers": "b"
  },
  {
    "category": "Scripting Overview",
    "question": "Which of the following are server-side scripting components? (Select all that apply)",
    "answers": {
      "a": "Business Rules",
      "b": "Script Includes",
      "c": "GlideRecord",
      "d": "g_form"
    },
    "rightAnswers": "a,b,c"
  },
  {
    "category": "Scripting Overview",
    "question": "Which feature enforces logic automatically when a record is inserted or updated?",
    "answers": {
      "a": "Client Script",
      "b": "Business Rule",
      "c": "Theme",
      "d": "Dashboard"
    },
    "rightAnswers": "b"
  },
  {
    "category": "Scripting Overview",
    "question": "Which object is a core server-side API in ServiceNow?",
    "answers": {
      "a": "g_form",
      "b": "GlideRecord",
      "c": "window",
      "d": "document"
    },
    "rightAnswers": "b"
  },
  {
    "category": "Scripting Overview",
    "question": "Which module allows workflow-like automation without traditional workflow scripting?",
    "answers": {
      "a": "Flow Designer",
      "b": "Theme Builder",
      "c": "Knowledge Base",
      "d": "Service Portal Designer"
    },
    "rightAnswers": "a"
  },
  {
    "category": "Scripting Overview",
    "question": "Who can manage all features, applications, and data on the platform?",
    "answers": {
      "a": "Application Administrator",
      "b": "System Administrator",
      "c": "End User",
      "d": "ITIL User"
    },
    "rightAnswers": "b"
  },
  {
    "category": "Scripting Overview",
    "question": "Which role can manage specific system definition components like Business Rules?",
    "answers": {
      "a": "System Definition Administrator",
      "b": "Service Desk Agent",
      "c": "Knowledge Contributor",
      "d": "Requester"
    },
    "rightAnswers": "a"
  },
  {
    "category": "Scripting Overview",
    "question": "An Application Administrator typically manages:",
    "answers": {
      "a": "Entire platform configuration",
      "b": "Operating system patches",
      "c": "Features and data of a specific application",
      "d": "Network firewall rules"
    },
    "rightAnswers": "c"
  },
  {
    "category": "Scripting Overview",
    "question": "Which are examples of granular administrative roles? (Select all that apply)",
    "answers": {
      "a": "business_rule_admin",
      "b": "client_script_admin",
      "c": "ui_policy_admin",
      "d": "theme_color_admin"
    },
    "rightAnswers": "a,b,c"
  },
  {
    "category": "Scripting Overview",
    "question": "UI Policies belong to which scripting area?",
    "answers": {
      "a": "Client-side behavior",
      "b": "Database indexing",
      "c": "Network routing",
      "d": "Hardware configuration"
    },
    "rightAnswers": "a"
  },
  {
    "category": "Locate Scripts",
    "question": "How can you quickly save a record for later access in ServiceNow?",
    "answers": {
      "a": "Export the record to XML",
      "b": "Create Favorite from the record context menu",
      "c": "Restart the instance",
      "d": "Add to Update Set"
    },
    "rightAnswers": "b"
  },
  {
    "category": "Locate Scripts",
    "question": "Dragging a record into the favorites area will:",
    "answers": {
      "a": "Delete the record",
      "b": "Create a bookmark/favorite",
      "c": "Clone the record",
      "d": "Create a new table"
    },
    "rightAnswers": "b"
  },
  {
    "category": "Locate Scripts",
    "question": "If you forget to create a favorite for a record, where can you find it quickly?",
    "answers": {
      "a": "System Logs",
      "b": "Your History",
      "c": "Update Sets",
      "d": "Plugins"
    },
    "rightAnswers": "b"
  },
  {
    "category": "Locate Scripts",
    "question": "Adding the 'Updated' column to a list helps you:",
    "answers": {
      "a": "Delete scripts faster",
      "b": "Sort by most recently edited scripts",
      "c": "Restart services",
      "d": "Change user roles"
    },
    "rightAnswers": "b"
  },
  {
    "category": "Locate Scripts",
    "question": "Adding the 'Updated by' column allows you to:",
    "answers": {
      "a": "Track who modified a script",
      "b": "Change system admin password",
      "c": "View server logs",
      "d": "Activate plugins"
    },
    "rightAnswers": "a"
  },
  {
    "category": "Locate Scripts",
    "question": "What does searching 'mySearchString' (no special characters) do in the Application Navigator filter?",
    "answers": {
      "a": "Exact match only",
      "b": "Contains search",
      "c": "Ends with search",
      "d": "Starts with search"
    },
    "rightAnswers": "a"
  },
  {
    "category": "Locate Scripts",
    "question": "What does searching '*mySearchString' return?",
    "answers": {
      "a": "No results",
      "b": "Starts with results",
      "c": "Ends with results",
      "d": "Contains results"
    },
    "rightAnswers": "d"
  },
  {
    "category": "Locate Scripts",
    "question": "What does searching 'mySearchString%' return?",
    "answers": {
      "a": "Exact match only",
      "b": "Ends with results",
      "c": "Starts with results",
      "d": "Case-sensitive search only"
    },
    "rightAnswers": "c"
  },
  {
    "category": "Locate Scripts",
    "question": "What does searching '%mySearchString' perform?",
    "answers": {
      "a": "Contains search",
      "b": "Starts with search",
      "c": "Ends with search",
      "d": "Table-only search"
    },
    "rightAnswers": "c"
  },
  {
    "category": "Locate Scripts",
    "question": "Which Application Navigator command opens a table list view in the content page?",
    "answers": {
      "a": "<table_name>.form",
      "b": "<table_name>.list",
      "c": "<table_name>.config",
      "d": "<table_name>.workflow"
    },
    "rightAnswers": "b"
  },
  {
    "category": "Locate Scripts",
    "question": "Which command opens a list view in a new tab or window?",
    "answers": {
      "a": "<table_name>.LIST",
      "b": "<table_name>.list",
      "c": "<table_name>.form",
      "d": "<table_name>.config"
    },
    "rightAnswers": "a"
  },
  {
    "category": "Locate Scripts",
    "question": "Which command opens a form view in the content pane?",
    "answers": {
      "a": "<table_name>.form",
      "b": "<table_name>.FORM",
      "c": "<table_name>.LIST",
      "d": "<table_name>.CONFIG"
    },
    "rightAnswers": "a"
  },
  {
    "category": "Locate Scripts",
    "question": "Which command opens a form view in a new tab?",
    "answers": {
      "a": "<table_name>.form",
      "b": "<table_name>.FORM",
      "c": "<table_name>.list",
      "d": "<table_name>.workflow"
    },
    "rightAnswers": "b"
  },
  {
    "category": "Locate Scripts",
    "question": "Which navigator command opens the table configuration view in a new window?",
    "answers": {
      "a": "<table_name>.CONFIG",
      "b": "<table_name>.FORM",
      "c": "<table_name>.list",
      "d": "<table_name>.record"
    },
    "rightAnswers": "a"
  },
  {
    "category": "Application Scope",
    "question": "Every application has a ________.",
    "answers": {
      "a": "Update Set",
      "b": "Scope",
      "c": "Domain",
      "d": "Theme"
    },
    "rightAnswers": "b"
  },
  {
    "category": "Application Scope",
    "question": "Application scope determines:",
    "answers": {
      "a": "Which of its resources are available to other applications",
      "b": "Which UI themes users can select",
      "c": "Which plugins are installed",
      "d": "Which browser is supported"
    },
    "rightAnswers": "a"
  },
  {
    "category": "Application Scope",
    "question": "Once scope is assigned to an application, it:",
    "answers": {
      "a": "Can be changed at any time",
      "b": "Cannot be changed",
      "c": "Is removed when you publish",
      "d": "Automatically becomes Global"
    },
    "rightAnswers": "b"
  },
  {
    "category": "Application Scope",
    "question": "Baseline applications provided by ServiceNow (for example, Incident, Service Catalog, Service Portal) are implemented in the:",
    "answers": {
      "a": "Global scope",
      "b": "Scoped Development",
      "c": "Personal scope",
      "d": "MID Server scope"
    },
    "rightAnswers": "a"
  },
  {
    "category": "Application Scope",
    "question": "Why is it difficult to protect/isolate application data in the Global scope?",
    "answers": {
      "a": "Because scripts are disabled in Global",
      "b": "Because everything is in the global scope and isolation is limited",
      "c": "Because tables cannot be created in Global",
      "d": "Because only MID Servers can access Global"
    },
    "rightAnswers": "b"
  },
  {
    "category": "Application Scope",
    "question": "Scope protects an application and its artifacts from damage to or from other applications.",
    "answers": {
      "a": "True",
      "b": "False",
      "c": "Only in Global scope",
      "d": "Only for baseline apps"
    },
    "rightAnswers": "a"
  },
  {
    "category": "Application Scope",
    "question": "For an application to share its resources with other applications, ________ must be granted.",
    "answers": {
      "a": "A theme",
      "b": "Explicit permission",
      "c": "A new instance",
      "d": "A browser setting"
    },
    "rightAnswers": "b"
  },
  {
    "category": "Application Scope",
    "question": "Application developers specify an application scope when they create a new application.",
    "answers": {
      "a": "True",
      "b": "False",
      "c": "Only for baseline apps",
      "d": "Only for Global scope"
    },
    "rightAnswers": "a"
  },
  {
    "category": "Application Scope",
    "question": "Developers can specify what parts of an application are accessible to other applications from: (Select all that apply)",
    "answers": {
      "a": "The Custom application record",
      "b": "Each application Table record",
      "c": "The System Logs module",
      "d": "The MID Server record"
    },
    "rightAnswers": "a,b"
  },
  {
    "category": "Application Scope",
    "question": "By default, other applications in the platform can access and change another application's tables and business logic.",
    "answers": {
      "a": "True",
      "b": "False (they cannot unless granted explicit permission)",
      "c": "True, but only in Scoped Development",
      "d": "True, but only in Global scope"
    },
    "rightAnswers": "b"
  },
  {
    "category": "Application Scope",
    "question": "Application scope ensures: (Select all that apply)",
    "answers": {
      "a": "The application does not interrupt core business services",
      "b": "Other applications do not interfere with its normal functioning",
      "c": "All scripts run client-side",
      "d": "All data is stored in Global scope"
    },
    "rightAnswers": "a,b"
  },
  {
    "category": "Application Scope",
    "question": "Artifacts are the application files in an application. Which are listed as examples of artifacts? (Select all that apply)",
    "answers": {
      "a": "Tables",
      "b": "Access Controls",
      "c": "Client Scripts",
      "d": "Business Rules"
    },
    "rightAnswers": "a,b,c,d"
  },
  {
    "category": "Application Scope",
    "question": "Scoped application artifacts (including scripts) automatically begin with a:",
    "answers": {
      "a": "Namespace identifier",
      "b": "Role identifier",
      "c": "Theme identifier",
      "d": "MID identifier"
    },
    "rightAnswers": "a"
  },
  {
    "category": "Application Scope",
    "question": "The scope namespace identifier prefix can be changed or removed.",
    "answers": {
      "a": "True",
      "b": "False (it cannot be changed or removed)",
      "c": "True, but only by admin",
      "d": "True, but only in Global"
    },
    "rightAnswers": "b"
  },
  {
    "category": "Application Scope",
    "question": "In the namespace identifier syntax, the Vendor Prefix is:",
    "answers": {
      "a": "Set when the application is first created",
      "b": "Unique ServiceNow-generated prefix for each customer",
      "c": "The unique script name",
      "d": "The application ID"
    },
    "rightAnswers": "b"
  },
  {
    "category": "Application Scope",
    "question": "In the namespace identifier syntax, the Application ID is:",
    "answers": {
      "a": "Unique ServiceNow-generated prefix for each customer",
      "b": "Set when the application is first created",
      "c": "The unique script name",
      "d": "Always 'global'"
    },
    "rightAnswers": "b"
  },
  {
    "category": "Application Scope",
    "question": "In the namespace identifier syntax, the Script name is the:",
    "answers": {
      "a": "Unique script name",
      "b": "Vendor prefix",
      "c": "Application ID",
      "d": "Scope record name"
    },
    "rightAnswers": "a"
  },
  {
    "category": "Application Scope",
    "question": "Which example best matches the slide's namespace identifier format?",
    "answers": {
      "a": "glide.travel.ExpenseReqBy",
      "b": "x_cld_travel_ExpenseReqBy",
      "c": "sys_script.ExpenseReqBy",
      "d": "travel:ExpenseReqBy"
    },
    "rightAnswers": "b"
  },
  {
    "category": "Application Scope",
    "question": "Out-of-scope scripts are:",
    "answers": {
      "a": "Deleted automatically",
      "b": "Read-only",
      "c": "Converted to Global",
      "d": "Editable only by admin"
    },
    "rightAnswers": "b"
  }
];

    // =========================
    // 2) HELPERS
    // =========================
    function parseRightAnswers(rightAnswersStr) {
      return new Set(
        String(rightAnswersStr || "")
          .split(",")
          .map(s => s.trim().toLowerCase())
          .filter(Boolean)
      );
    }

    function escapeHtml(str) {
      return String(str).replace(/[&<>"']/g, m => ({
        "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;"
      }[m]));
    }

    function normalizeCategory(c) {
      var v = (c ?? "Uncategorized").toString().trim();
      return v ? v : "Uncategorized";
    }

    function getCategories(questions) {
      var seen = new Set();
      var cats = [];
      questions.forEach(q => {
        var c = normalizeCategory(q.category);
        if (!seen.has(c)) { seen.add(c); cats.push(c); }
      });
      return cats;
    }

    function questionMatchesSearch(q, term) {
      if (!term) return true;
      var t = term.toLowerCase();

      var inQuestion = String(q.question || "").toLowerCase().includes(t);
      var inCategory = normalizeCategory(q.category).toLowerCase().includes(t);

      var ansObj = q.answers || {};
      var inAnswers = Object.keys(ansObj).some(k => String(ansObj[k]).toLowerCase().includes(t));

      return inQuestion || inCategory || inAnswers;
    }

    function answerCountLabel(rightSet) {
      // When multiple answers, show number like 2, 3...
      // When single, show 1
      return rightSet.size + (rightSet.size === 1 ? " answer" : " answers");
    }

    // =========================
    // 3) RENDER QUESTIONS
    // =========================
    function renderQuestions(questions, rootEl) {
      rootEl.innerHTML = "";

      if (!questions.length) {
        rootEl.innerHTML = '<div class="empty muted">No questions match this filter.</div>';
        return;
      }

      questions.forEach((q, idx) => {
        var card = document.createElement("section");
        card.className = "card";
        card.setAttribute("data-category", normalizeCategory(q.category));

        var rightSet = parseRightAnswers(q.rightAnswers);

        // header
        var header = document.createElement("div");
        header.className = "qhead";

        var title = document.createElement("p");
        title.className = "qtitle";
        title.innerHTML = "<strong>Q" + (idx + 1) + ".</strong> " + escapeHtml(q.question);

        var meta = document.createElement("span");
        meta.className = "pill";
        // âœ… category + number of correct answers (2, 3...)
        meta.textContent = normalizeCategory(q.category) + " â€¢ " + answerCountLabel(rightSet);

        header.appendChild(title);
        header.appendChild(meta);

        // answers
        var answersWrap = document.createElement("div");
        answersWrap.className = "answers";

        var keys = Object.keys(q.answers || {}).sort((a,b) => a.localeCompare(b));
        keys.forEach((key) => {
          var row = document.createElement("div");
          row.className = "ans";
          row.setAttribute("data-option", key.toLowerCase());
          row.innerHTML =
            "<code>" + escapeHtml(key) + ".</code>" +
            "<div>" + escapeHtml(q.answers[key]) + "</div>";
          answersWrap.appendChild(row);
        });

        // buttons
        var btnRow = document.createElement("div");
        btnRow.className = "btnrow";

        var showBtn = document.createElement("button");
        showBtn.type = "button";
        showBtn.textContent = "Show right answer";
        showBtn.addEventListener("click", function () {
          card.querySelectorAll(".ans").forEach(r => {
            var opt = (r.getAttribute("data-option") || "").toLowerCase();
            r.classList.toggle("correct", rightSet.has(opt));
          });
        });

        var clearBtn = document.createElement("button");
        clearBtn.type = "button";
        clearBtn.textContent = "Clear highlight";
        clearBtn.addEventListener("click", function () {
          card.querySelectorAll(".ans.correct").forEach(r => r.classList.remove("correct"));
        });

        btnRow.appendChild(showBtn);
        btnRow.appendChild(clearBtn);

        card.appendChild(header);
        card.appendChild(answersWrap);
        card.appendChild(btnRow);

        rootEl.appendChild(card);
      });
    }

    // =========================
    // 4) CATEGORY BUTTONS + FILTERING + SHUFFLE
    // =========================
    var state = {
      selectedCategory: "__ALL__",
      searchTerm: ""
    };

    function shuffleQuestions() {
      for (let i = questionsBankArray.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [questionsBankArray[i], questionsBankArray[j]] = [questionsBankArray[j], questionsBankArray[i]];
      }
    }

    function applyFiltersAndRender() {
      var filtered = questionsBankArray
        .filter(q => state.selectedCategory === "__ALL__" || normalizeCategory(q.category) === state.selectedCategory)
        .filter(q => questionMatchesSearch(q, state.searchTerm));

      // Update header counts
      var total = questionsBankArray.length;
      var shown = filtered.length;
      document.getElementById("counts").textContent = shown + " / " + total + " questions";

      renderQuestions(filtered, document.getElementById("questionsRoot"));
    }

    function buildCategoryButtons(categories, containerEl) {
      containerEl.innerHTML = "";

      function makeBtn(label, value) {
        var b = document.createElement("button");
        b.type = "button";
        b.textContent = label;
        b.setAttribute("data-cat", value);
        b.addEventListener("click", function () {
          // Only remove active from category buttons (not from Shuffle/Clear/Search buttons)
          containerEl.querySelectorAll("button").forEach(x => x.classList.remove("active"));
          b.classList.add("active");

          state.selectedCategory = value;
          applyFiltersAndRender();
        });
        return b;
      }

      // All button
      var allBtn = makeBtn("All", "__ALL__");
      allBtn.classList.add("active");
      containerEl.appendChild(allBtn);

      // Category buttons
      categories.forEach(cat => containerEl.appendChild(makeBtn(cat, cat)));
    }

    // =========================
    // 5) INIT
    // =========================
    (function init(){
      var cats = getCategories(questionsBankArray);
      buildCategoryButtons(cats, document.getElementById("categoryButtons"));

      // Search
      var searchBox = document.getElementById("searchBox");
      searchBox.addEventListener("input", function(){
        state.searchTerm = searchBox.value || "";
        applyFiltersAndRender();
      });

      document.getElementById("clearSearchBtn").addEventListener("click", function(){
        searchBox.value = "";
        state.searchTerm = "";
        applyFiltersAndRender();
        searchBox.focus();
      });

      // Shuffle
      document.getElementById("shuffleBtn").addEventListener("click", function(){
        shuffleQuestions();
        applyFiltersAndRender();
      });

      applyFiltersAndRender();
    })();
  </script>
</body>
</html>
